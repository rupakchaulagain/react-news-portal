{"ast":null,"code":"import _classCallCheck from \"/home/rupak/Rupak/Rupesh/jharna/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/rupak/Rupak/Rupesh/jharna/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/home/rupak/Rupak/Rupesh/jharna/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/home/rupak/Rupak/Rupesh/jharna/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"/home/rupak/Rupak/Rupesh/jharna/src/views/news/modals/UpdateImageModal.js\";\nimport React from 'react';\nimport { CButton, CForm, CFormGroup, CInput, CLabel, CModal, CModalBody, CImg, CModalHeader } from \"@coreui/react\";\nimport * as axios from \"axios\";\nimport Cookies from \"universal-cookie\";\nimport CIcon from \"@coreui/icons-react\";\nimport { BASE_URL } from \"../../../api/Api\";\n\nvar UpdateImageModal = /*#__PURE__*/function (_React$Component) {\n  _inherits(UpdateImageModal, _React$Component);\n\n  var _super = _createSuper(UpdateImageModal);\n\n  function UpdateImageModal(props) {\n    var _this;\n\n    _classCallCheck(this, UpdateImageModal);\n\n    _this = _super.call(this, props);\n\n    _this.imageUploader = function (e) {\n      e.preventDefault();\n      console.log(e.target.files);\n\n      _this.setState({\n        selectedFile: e.target.files[0]\n      });\n    };\n\n    _this.handleFormSubmit = function (e) {\n      e.preventDefault();\n      var cookies = new Cookies();\n      axios.post(BASE_URL + \"/posts/updateImage/\".concat(_this.props.imageItem), _this.state.selectedFile, {\n        headers: {\n          Authorization: cookies.get('token')\n        }\n      }).then(function (response) {\n        axios.get(BASE_URL + '/usersnews/').then(function (response) {\n          console.log(response.data);\n          var data = response.data;\n\n          _this.props.updateNews(data);\n\n          console.log(\"o/p\" + _this.state.newsList);\n        });\n\n        _this.props.updateImageToggle();\n      }).catch(function (error) {\n        if (error.response) {\n          // Request made and server responded\n          console.log(error.response);\n        } // throw new Error('Sorry Internal Server Error')\n\n\n        this.showError(error.response);\n      });\n    };\n\n    _this.state = {\n      _id: _this.props.imageItem\n    };\n    return _this;\n  }\n\n  _createClass(UpdateImageModal, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var cookies = new Cookies();\n      axios.get(BASE_URL + \"/posts/\".concat(this.props.imageItem), {\n        headers: {\n          Authorization: cookies.get('token')\n        }\n      }).then(function (response) {\n        var news = response.data;\n\n        _this2.setState({\n          images: news.images\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(CModal, {\n        size: 'xl',\n        show: this.props.updateImageModal,\n        onClose: this.props.updateImageToggle,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(CModalHeader, {\n        closeButton: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 21\n        }\n      }, \"Update Image\"), /*#__PURE__*/React.createElement(CModalBody, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(CForm, {\n        onSubmit: this.handleFormSubmit,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(CFormGroup, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(CLabel, {\n        htmlFor: \"images\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 33\n        }\n      }, \"Images\"), /*#__PURE__*/React.createElement(CImg, {\n        src: BASE_URL + \"/PostImage/\" + this.state.images,\n        alt: \"image\",\n        style: {\n          width: 500,\n          height: 400\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 33\n        }\n      }), /*#__PURE__*/React.createElement(CInput, {\n        type: \"file\",\n        name: \"files\",\n        onChange: this.imageUploader,\n        placeholder: \"Enter Post Details\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 33\n        }\n      })), /*#__PURE__*/React.createElement(CFormGroup, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(CButton, {\n        type: \"submit\",\n        size: \"sm\",\n        color: \"primary\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(CIcon, {\n        name: \"cil-scrubber\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 82\n        }\n      }), \" Submit\"), /*#__PURE__*/React.createElement(CButton, {\n        type: \"reset\",\n        size: \"sm\",\n        color: \"danger\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(CIcon, {\n        name: \"cil-ban\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 80\n        }\n      }), \" Reset\"))))));\n    }\n  }]);\n\n  return UpdateImageModal;\n}(React.Component);\n\nexport default UpdateImageModal;","map":{"version":3,"sources":["/home/rupak/Rupak/Rupesh/jharna/src/views/news/modals/UpdateImageModal.js"],"names":["React","CButton","CForm","CFormGroup","CInput","CLabel","CModal","CModalBody","CImg","CModalHeader","axios","Cookies","CIcon","BASE_URL","UpdateImageModal","props","imageUploader","e","preventDefault","console","log","target","files","setState","selectedFile","handleFormSubmit","cookies","post","imageItem","state","headers","Authorization","get","then","response","data","updateNews","newsList","updateImageToggle","catch","error","showError","_id","news","images","updateImageModal","width","height","Component"],"mappings":"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","sourcesContent":["import React from 'react'\nimport {CButton, CForm, CFormGroup, CInput, CLabel, CModal, CModalBody, CImg, CModalHeader} from \"@coreui/react\";\nimport * as axios from \"axios\";\nimport Cookies from \"universal-cookie\";\nimport CIcon from \"@coreui/icons-react\";\nimport {BASE_URL} from \"../../../api/Api\";\n\nclass UpdateImageModal extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            _id: this.props.imageItem,\n\n        }\n    }\n\n    imageUploader = (e) => {\n        e.preventDefault()\n\n        console.log(e.target.files)\n\n        this.setState({\n            selectedFile: e.target.files[0],\n        })\n\n    }\n\n    handleFormSubmit = (e) => {\n        e.preventDefault()\n\n        const cookies = new Cookies();\n\n        axios.post(BASE_URL + `/posts/updateImage/${this.props.imageItem}`, this.state.selectedFile,\n            {\n                headers: {\n                    Authorization: cookies.get('token'),\n\n                }\n            })\n            .then(response => {\n\n                axios.get(BASE_URL + '/usersnews/')\n                    .then(response => {\n\n                        console.log(response.data)\n                        const data = response.data\n\n                        this.props.updateNews(data)\n\n                        console.log(\"o/p\" + this.state.newsList)\n                    })\n\n                this.props.updateImageToggle()\n\n            })\n            .catch(function (error) {\n                if (error.response) {\n                    // Request made and server responded\n                    console.log(error.response);\n                }\n\n                // throw new Error('Sorry Internal Server Error')\n                this.showError(error.response)\n            })\n\n    }\n\n    componentDidMount() {\n        const cookies = new Cookies();\n\n        axios.get(BASE_URL + `/posts/${this.props.imageItem}`,\n            {\n                headers: {\n                    Authorization: cookies.get('token')\n                }\n            }\n        )\n            .then(response => {\n\n                let news = response.data\n                this.setState({\n                    images: news.images,\n\n                })\n\n            })\n\n    }\n\n    render() {\n\n        return (\n            <>\n                <CModal size={'xl'}\n                        show={this.props.updateImageModal}\n                        onClose={this.props.updateImageToggle}\n                >\n                    <CModalHeader closeButton>Update Image</CModalHeader>\n                    <CModalBody>\n\n                        <CForm onSubmit={this.handleFormSubmit}>\n\n                            <CFormGroup>\n                                <CLabel htmlFor=\"images\">Images</CLabel>\n\n                                <CImg src={BASE_URL + \"/PostImage/\" + this.state.images}\n                                      alt=\"image\"\n                                      style={{width: 500, height: 400}}/>\n                                <CInput type=\"file\" name=\"files\" onChange={this.imageUploader}\n                                        placeholder=\"Enter Post Details\"/>\n                            </CFormGroup>\n\n                            <CFormGroup>\n                                <CButton type=\"submit\" size=\"sm\" color=\"primary\"><CIcon\n                                    name=\"cil-scrubber\"/> Submit</CButton>\n                                <CButton type=\"reset\" size=\"sm\" color=\"danger\"><CIcon name=\"cil-ban\"/> Reset</CButton>\n                            </CFormGroup>\n\n                        </CForm>\n\n                    </CModalBody>\n                </CModal>\n            </>\n        )\n    }\n\n}\n\nexport default UpdateImageModal\n"]},"metadata":{},"sourceType":"module"}