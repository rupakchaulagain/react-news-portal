{"ast":null,"code":"import _classCallCheck from\"/home/rupak/Rupak/Rupesh/jharna/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/rupak/Rupak/Rupesh/jharna/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/rupak/Rupak/Rupesh/jharna/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/rupak/Rupak/Rupesh/jharna/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import{CButton,CForm,CFormGroup,CInput,CLabel,CModal,CModalBody,CImg,CModalHeader}from\"@coreui/react\";import*as axios from\"axios\";import Cookies from\"universal-cookie\";import CIcon from\"@coreui/icons-react\";import{BASE_URL}from\"../../../api/Api\";var UpdateImageModal=/*#__PURE__*/function(_React$Component){_inherits(UpdateImageModal,_React$Component);var _super=_createSuper(UpdateImageModal);function UpdateImageModal(props){var _this;_classCallCheck(this,UpdateImageModal);_this=_super.call(this,props);_this.imageUploader=function(e){e.preventDefault();console.log(e.target.files);_this.setState({selectedFile:e.target.files[0]});};_this.handleFormSubmit=function(e){e.preventDefault();var cookies=new Cookies();axios.post(BASE_URL+\"/posts/updateImage/\".concat(_this.props.imageItem),_this.state.selectedFile,{headers:{Authorization:cookies.get('token')}}).then(function(response){axios.get(BASE_URL+'/usersnews/').then(function(response){console.log(response.data);var data=response.data;_this.props.updateNews(data);console.log(\"o/p\"+_this.state.newsList);});_this.props.updateImageToggle();}).catch(function(error){if(error.response){// Request made and server responded\nconsole.log(error.response);}// throw new Error('Sorry Internal Server Error')\nthis.showError(error.response);});};_this.state={_id:_this.props.imageItem};return _this;}_createClass(UpdateImageModal,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var cookies=new Cookies();axios.get(BASE_URL+\"/posts/\".concat(this.props.imageItem),{headers:{Authorization:cookies.get('token')}}).then(function(response){var news=response.data;_this2.setState({images:news.images});});}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(CModal,{size:'xl',show:this.props.updateImageModal,onClose:this.props.updateImageToggle},/*#__PURE__*/React.createElement(CModalHeader,{closeButton:true},\"Update Image\"),/*#__PURE__*/React.createElement(CModalBody,null,/*#__PURE__*/React.createElement(CForm,{onSubmit:this.handleFormSubmit},/*#__PURE__*/React.createElement(CFormGroup,null,/*#__PURE__*/React.createElement(CLabel,{htmlFor:\"images\"},\"Images\"),/*#__PURE__*/React.createElement(CImg,{src:BASE_URL+\"/PostImage/\"+this.state.images,alt:\"image\",style:{width:500,height:400}}),/*#__PURE__*/React.createElement(CInput,{type:\"file\",name:\"files\",onChange:this.imageUploader,placeholder:\"Enter Post Details\"})),/*#__PURE__*/React.createElement(CFormGroup,null,/*#__PURE__*/React.createElement(CButton,{type:\"submit\",size:\"sm\",color:\"primary\"},/*#__PURE__*/React.createElement(CIcon,{name:\"cil-scrubber\"}),\" Submit\"),/*#__PURE__*/React.createElement(CButton,{type:\"reset\",size:\"sm\",color:\"danger\"},/*#__PURE__*/React.createElement(CIcon,{name:\"cil-ban\"}),\" Reset\"))))));}}]);return UpdateImageModal;}(React.Component);export default UpdateImageModal;","map":{"version":3,"sources":["/home/rupak/Rupak/Rupesh/jharna/src/views/news/modals/UpdateImageModal.js"],"names":["React","CButton","CForm","CFormGroup","CInput","CLabel","CModal","CModalBody","CImg","CModalHeader","axios","Cookies","CIcon","BASE_URL","UpdateImageModal","props","imageUploader","e","preventDefault","console","log","target","files","setState","selectedFile","handleFormSubmit","cookies","post","imageItem","state","headers","Authorization","get","then","response","data","updateNews","newsList","updateImageToggle","catch","error","showError","_id","news","images","updateImageModal","width","height","Component"],"mappings":"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","sourcesContent":["import React from 'react'\nimport {CButton, CForm, CFormGroup, CInput, CLabel, CModal, CModalBody, CImg, CModalHeader} from \"@coreui/react\";\nimport * as axios from \"axios\";\nimport Cookies from \"universal-cookie\";\nimport CIcon from \"@coreui/icons-react\";\nimport {BASE_URL} from \"../../../api/Api\";\n\nclass UpdateImageModal extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            _id: this.props.imageItem,\n\n        }\n    }\n\n    imageUploader = (e) => {\n        e.preventDefault()\n\n        console.log(e.target.files)\n\n        this.setState({\n            selectedFile: e.target.files[0],\n        })\n\n    }\n\n    handleFormSubmit = (e) => {\n        e.preventDefault()\n\n        const cookies = new Cookies();\n\n        axios.post(BASE_URL+`/posts/updateImage/${this.props.imageItem}`, this.state.selectedFile,\n            {\n                headers: {\n                    Authorization: cookies.get('token'),\n                }\n            })\n            .then(response => {\n\n                axios.get(BASE_URL+'/usersnews/')\n                    .then(response => {\n\n                        console.log(response.data)\n                        const data = response.data\n\n                        this.props.updateNews(data)\n\n                        console.log(\"o/p\" + this.state.newsList)\n                    })\n\n                this.props.updateImageToggle()\n\n            })\n            .catch(function (error) {\n                if (error.response) {\n                    // Request made and server responded\n                    console.log(error.response);\n                }\n\n                // throw new Error('Sorry Internal Server Error')\n                this.showError(error.response)\n            })\n\n    }\n\n    componentDidMount() {\n        const cookies = new Cookies();\n\n        axios.get(BASE_URL+`/posts/${this.props.imageItem}`,\n            {\n                headers: {\n                    Authorization: cookies.get('token')\n                }\n            }\n        )\n            .then(response => {\n\n                let news = response.data\n                this.setState({\n                    images: news.images,\n\n                })\n\n            })\n\n    }\n\n    render() {\n\n        return (\n            <>\n                <CModal size={'xl'}\n                        show={this.props.updateImageModal}\n                        onClose={this.props.updateImageToggle}\n                >\n                    <CModalHeader closeButton>Update Image</CModalHeader>\n                    <CModalBody>\n\n                        <CForm onSubmit={this.handleFormSubmit}>\n\n                            <CFormGroup>\n                                <CLabel htmlFor=\"images\">Images</CLabel>\n\n                                <CImg src={BASE_URL+\"/PostImage/\" + this.state.images}\n                                        alt=\"image\"\n                                        style={{width: 500, height: 400}}/>\n                                <CInput type=\"file\" name=\"files\" onChange={this.imageUploader}\n                                        placeholder=\"Enter Post Details\"/>\n                            </CFormGroup>\n\n                            <CFormGroup>\n                                <CButton type=\"submit\" size=\"sm\" color=\"primary\"><CIcon\n                                    name=\"cil-scrubber\"/> Submit</CButton>\n                                <CButton type=\"reset\" size=\"sm\" color=\"danger\"><CIcon name=\"cil-ban\"/> Reset</CButton>\n                            </CFormGroup>\n\n                        </CForm>\n\n                    </CModalBody>\n                </CModal>\n            </>\n        )\n    }\n\n}\n\nexport default UpdateImageModal\n"]},"metadata":{},"sourceType":"module"}