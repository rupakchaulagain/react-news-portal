{"ast":null,"code":"import _defineProperty from\"/home/rupak/Rupak/Rupesh/jharna/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/home/rupak/Rupak/Rupesh/jharna/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/rupak/Rupak/Rupesh/jharna/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/rupak/Rupak/Rupesh/jharna/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/rupak/Rupak/Rupesh/jharna/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import{CButton,CCard,CCardBody,CForm,CFormGroup,CInput,CLabel,CTextarea}from\"@coreui/react\";import*as axios from\"axios\";import CIcon from\"@coreui/icons-react\";import Cookies from\"universal-cookie\";var NewsForm=/*#__PURE__*/function(_React$Component){_inherits(NewsForm,_React$Component);var _super=_createSuper(NewsForm);function NewsForm(props){var _this;_classCallCheck(this,NewsForm);_this=_super.call(this,props);_this.handleInputChange=function(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value;_this.setState(_defineProperty({},name,value));};_this.imageUploader=function(e){e.preventDefault();console.log(e.target.files);_this.setState({selectedFile:e.target.files[0]});};_this.handleFormSubmit=function(e){e.preventDefault();var cookies=new Cookies();var formData=new FormData();formData.append('images',_this.state.selectedFile);formData.append('posttitle',_this.state.posttitle);formData.append('postcategory',_this.state.postcategory);formData.append('postdetails',_this.state.postdetails);formData.append('postconclusion',_this.state.postconclusion);axios.post('https://frozen-refuge-74833.herokuapp.com/posts/',formData,{headers:{Authorization:cookies.get('token')}}).then(function(response){axios.get('https://frozen-refuge-74833.herokuapp.com/usersnews/').then(function(response){console.log(response.data);var data=response.data;_this.props.updateNews(data);console.log(\"o/p\"+_this.state.newsList);});_this.props.manageTabController();_this.props.showAlert();}).catch(function(error){if(error.response){// Request made and server responded\nconsole.log(error.response);}// throw new Error('Sorry Internal Server Error')\nthis.showError(error.response);});};console.log(props);_this.state={posttitle:\"\",postcategory:\"\",postdetails:\"\",postconclusion:\"\",uploading:false,selectedFile:null};return _this;}_createClass(NewsForm,[{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(CCard,null,/*#__PURE__*/React.createElement(CCardBody,null,/*#__PURE__*/React.createElement(CForm,{onSubmit:this.handleFormSubmit},/*#__PURE__*/React.createElement(CFormGroup,null,/*#__PURE__*/React.createElement(CLabel,{htmlFor:\"posttitle\"},\"Post tittle\"),/*#__PURE__*/React.createElement(CInput,{name:\"posttitle\",id:\"posttitle\",value:this.state.posttitle,onChange:this.handleInputChange,placeholder:\"Enter Post Tittle\",required:\"required\"})),/*#__PURE__*/React.createElement(CFormGroup,null,/*#__PURE__*/React.createElement(CLabel,{htmlFor:\"postcategory\"},\"Post Category\"),/*#__PURE__*/React.createElement(CInput,{name:\"postcategory\",id:\"postcategory\",value:this.state.postcategory,onChange:this.handleInputChange,placeholder:\"Enter Post Category\",required:\"required\"})),/*#__PURE__*/React.createElement(CFormGroup,null,/*#__PURE__*/React.createElement(CLabel,{htmlFor:\"postdetails\"},\"Post Details\"),/*#__PURE__*/React.createElement(CInput,{id:\"postdetails\",name:\"postdetails\",value:this.state.postdetails,onChange:this.handleInputChange,placeholder:\"Enter Post Details\"})),/*#__PURE__*/React.createElement(CFormGroup,null,/*#__PURE__*/React.createElement(CLabel,{htmlFor:\"postconclusion\"},\"Post Conclusion\"),/*#__PURE__*/React.createElement(CTextarea,{name:\"postconclusion\",id:\"postconclusion\",value:this.state.postconclusion,onChange:this.handleInputChange,placeholder:\"Enter Post Conclusion\",required:\"required\"})),/*#__PURE__*/React.createElement(CFormGroup,null,/*#__PURE__*/React.createElement(CLabel,{htmlFor:\"images\"},\"Images\"),/*#__PURE__*/React.createElement(CInput,{type:\"file\",name:\"file\",onChange:this.imageUploader,placeholder:\"Enter Post Details\"})),/*#__PURE__*/React.createElement(CFormGroup,null,/*#__PURE__*/React.createElement(CButton,{type:\"submit\",size:\"sm\",color:\"primary\"},/*#__PURE__*/React.createElement(CIcon,{name:\"cil-scrubber\"}),\" Submit\")))));}}]);return NewsForm;}(React.Component);export default NewsForm;","map":{"version":3,"sources":["/home/rupak/Rupak/Rupesh/jharna/src/views/news/NewsForm.js"],"names":["React","CButton","CCard","CCardBody","CForm","CFormGroup","CInput","CLabel","CTextarea","axios","CIcon","Cookies","NewsForm","props","handleInputChange","e","target","name","value","setState","imageUploader","preventDefault","console","log","files","selectedFile","handleFormSubmit","cookies","formData","FormData","append","state","posttitle","postcategory","postdetails","postconclusion","post","headers","Authorization","get","then","response","data","updateNews","newsList","manageTabController","showAlert","catch","error","showError","uploading","Component"],"mappings":"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","sourcesContent":["import React from 'react'\nimport {CButton, CCard, CCardBody, CForm, CFormGroup, CInput, CLabel, CTextarea,} from \"@coreui/react\";\nimport * as axios from \"axios\";\nimport CIcon from \"@coreui/icons-react\";\nimport Cookies from \"universal-cookie\";\n\nclass NewsForm extends React.Component {\n    constructor(props) {\n        super(props);\n\n        console.log(props)\n\n        this.state = {\n            posttitle: \"\",\n            postcategory: \"\",\n            postdetails: \"\",\n            postconclusion: \"\",\n            uploading: false,\n            selectedFile: null,\n        }\n    }\n\n    handleInputChange = (e) => {\n\n        const {name, value} = e.target\n        this.setState({\n            [name]: value\n        })\n\n    }\n\n    imageUploader = (e) => {\n        e.preventDefault()\n\n        console.log(e.target.files)\n\n        this.setState({\n            selectedFile: e.target.files[0],\n        })\n\n    }\n\n    handleFormSubmit = (e) => {\n        e.preventDefault()\n\n        const cookies = new Cookies();\n\n        let formData = new FormData()\n        formData.append('images', this.state.selectedFile)\n        formData.append('posttitle', this.state.posttitle);\n        formData.append('postcategory', this.state.postcategory);\n        formData.append('postdetails', this.state.postdetails);\n        formData.append('postconclusion', this.state.postconclusion)\n\n\n        axios.post('https://frozen-refuge-74833.herokuapp.com/posts/',\n            formData,\n            {\n                headers: {\n                    Authorization: cookies.get('token'),\n                }\n            })\n            .then(response => {\n\n                axios.get('https://frozen-refuge-74833.herokuapp.com/usersnews/')\n                    .then(response => {\n\n                        console.log(response.data)\n                        const data = response.data\n\n                        this.props.updateNews(data)\n\n                        console.log(\"o/p\" + this.state.newsList)\n                    })\n\n                this.props.manageTabController()\n\n                this.props.showAlert()\n\n            })\n            .catch(function (error) {\n                if (error.response) {\n                    // Request made and server responded\n                    console.log(error.response);\n                }\n\n                // throw new Error('Sorry Internal Server Error')\n                this.showError(error.response)\n            })\n\n    }\n\n\n    render() {\n        return (\n\n\n            <CCard>\n                <CCardBody>\n\n                    <CForm onSubmit={this.handleFormSubmit}>\n                        <CFormGroup>\n                            <CLabel htmlFor=\"posttitle\">Post tittle</CLabel>\n                            <CInput name=\"posttitle\" id=\"posttitle\"\n                                    value={this.state.posttitle}\n                                    onChange={this.handleInputChange}\n                                    placeholder=\"Enter Post Tittle\"\n                                    required=\"required\"/>\n                        </CFormGroup>\n\n                        <CFormGroup>\n                            <CLabel htmlFor=\"postcategory\">Post Category</CLabel>\n                            <CInput name=\"postcategory\" id=\"postcategory\"\n                                    value={this.state.postcategory}\n                                    onChange={this.handleInputChange}\n                                    placeholder=\"Enter Post Category\"\n                                    required=\"required\"/>\n                        </CFormGroup>\n\n                        <CFormGroup>\n                            <CLabel htmlFor=\"postdetails\">Post Details</CLabel>\n                            <CInput id=\"postdetails\" name=\"postdetails\"\n                                    value={this.state.postdetails}\n                                    onChange={this.handleInputChange}\n                                    placeholder=\"Enter Post Details\"/>\n                        </CFormGroup>\n\n                        <CFormGroup>\n                            <CLabel htmlFor=\"postconclusion\">Post Conclusion</CLabel>\n                            <CTextarea name=\"postconclusion\" id=\"postconclusion\"\n                                       value={this.state.postconclusion}\n                                       onChange={this.handleInputChange}\n                                       placeholder=\"Enter Post Conclusion\"\n                                       required=\"required\"/>\n                        </CFormGroup>\n\n                        <CFormGroup>\n                            <CLabel htmlFor=\"images\">Images</CLabel>\n                            <CInput type=\"file\" name=\"file\" onChange={this.imageUploader}\n                                    placeholder=\"Enter Post Details\"/>\n                        </CFormGroup>\n\n                        <CFormGroup>\n                            <CButton type=\"submit\" size=\"sm\" color=\"primary\"><CIcon\n                                name=\"cil-scrubber\"/> Submit</CButton>\n                        </CFormGroup>\n\n                    </CForm>\n                </CCardBody>\n\n            </CCard>\n\n\n        )\n    }\n}\n\nexport default NewsForm\n"]},"metadata":{},"sourceType":"module"}