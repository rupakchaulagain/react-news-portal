{"ast":null,"code":"import _slicedToArray from\"/home/rupak/Rupak/Rupesh/jharna/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{CDataTable,CDropdown,CDropdownItem,CDropdownMenu,CDropdownToggle,CImg}from\"@coreui/react\";import React,{useState}from\"react\";import DeleteModal from\"./modals/DeleteModal\";import DetailModal from\"./modals/DetailModal\";import EditModal from\"./modals/EditModal\";import{FacebookIcon,FacebookShareButton}from\"react-share\";import Cookies from\"universal-cookie\";import*as axios from\"axios\";import UpdateImageModal from\"./modals/UpdateImageModal\";var deleteImage=function deleteImage(id,props){var cookies=new Cookies();console.log(cookies.get('token'));axios.put(\"https://frozen-refuge-74833.herokuapp.com/posts/deleteImage/\".concat(id),null,{headers:{Authorization:cookies.get('token')}}).then(function(response){axios.get('https://frozen-refuge-74833.herokuapp.com/posts/',{headers:{Authorization:cookies.get('token')}}).then(function(response){var data=response.data;props.updateNews(data);});});};var fields=['posttitle','postcategory','postdetails','postconclusion','images','share','actions'];var NewsTable=function NewsTable(props){var newsList=props.newsList;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),modal=_useState2[0],setModal=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),detailModal=_useState4[0],setDetailModal=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),editModal=_useState6[0],setEditModal=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),updateImageModal=_useState8[0],setUpdateImageModal=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),selectedItem=_useState10[0],setSelectedItem=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),editItem=_useState12[0],setEditItem=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),imageItem=_useState14[0],setImageItem=_useState14[1];var detailModalToggle=function detailModalToggle(id){setSelectedItem(id);setDetailModal(!detailModal);};var updateImageToggle=function updateImageToggle(id){setImageItem(id);setUpdateImageModal(!updateImageModal);};var editModalToggle=function editModalToggle(id){setEditItem(id);setEditModal(!editModal);};var toggle=function toggle(id){setSelectedItem(id);setModal(!modal);};return/*#__PURE__*/React.createElement(React.Fragment,null,selectedItem?/*#__PURE__*/React.createElement(DetailModal,{selectedItem:selectedItem,detailModal:detailModal,detailModalToggle:detailModalToggle}):null,imageItem?/*#__PURE__*/React.createElement(UpdateImageModal,{updateNews:props.updateNews,imageItem:imageItem,updateImageModal:updateImageModal,updateImageToggle:updateImageToggle}):null,editItem?/*#__PURE__*/React.createElement(EditModal,{updateNews:props.updateNews,editItem:editItem,editModal:editModal,editModalToggle:editModalToggle}):null,/*#__PURE__*/React.createElement(DeleteModal,{showDeleteAlert:props.showDeleteAlert,updateNews:props.updateNews,selectedItem:selectedItem,modal:modal,toggle:toggle}),/*#__PURE__*/React.createElement(CDataTable,{items:newsList,fields:fields,bordered:true,itemsPerPage:10,pagination:true,scopedSlots:{'images':function images(item){return/*#__PURE__*/React.createElement(\"td\",null,item.images!==null?/*#__PURE__*/React.createElement(CImg,{src:\"https://frozen-refuge-74833.herokuapp.com/PostImage/\"+item.images,alt:\"image\",style:{width:500,height:400}}):/*#__PURE__*/React.createElement(CImg,{src:\"\",alt:\"image\",style:{width:500,height:400}}),item.images!==null?/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){return deleteImage(item._id,props);}},\"Delete Image\"):null);},'share':function share(item){return/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(FacebookShareButton,{quote:item.posttitle,url:\"https://festive-jepsen-4d10b9.netlify.app/#/feeds/details/\".concat(item._id)},/*#__PURE__*/React.createElement(FacebookIcon,{logoFillColor:\"white\"})));},'actions':function actions(item){return/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(CDropdown,{className:\"m-1 btn-group\"},/*#__PURE__*/React.createElement(CDropdownToggle,{color:\"primary\"},\"Actions\"),/*#__PURE__*/React.createElement(CDropdownMenu,null,/*#__PURE__*/React.createElement(CDropdownItem,{onClick:function onClick(){return detailModalToggle(item._id);}},\"View\"),/*#__PURE__*/React.createElement(CDropdownItem,{onClick:function onClick(){return updateImageToggle(item._id);}},\"Update Image\"),/*#__PURE__*/React.createElement(CDropdownItem,{onClick:function onClick(){return editModalToggle(item._id);}},\"Edit\"),/*#__PURE__*/React.createElement(CDropdownItem,{key:item._id,onClick:function onClick(){return toggle(item._id);}},\"Delete\"))));}}}));};export default NewsTable;","map":{"version":3,"sources":["/home/rupak/Rupak/Rupesh/jharna/src/views/news/NewsTable.js"],"names":["CDataTable","CDropdown","CDropdownItem","CDropdownMenu","CDropdownToggle","CImg","React","useState","DeleteModal","DetailModal","EditModal","FacebookIcon","FacebookShareButton","Cookies","axios","UpdateImageModal","deleteImage","id","props","cookies","console","log","get","put","headers","Authorization","then","response","data","updateNews","fields","NewsTable","newsList","modal","setModal","detailModal","setDetailModal","editModal","setEditModal","updateImageModal","setUpdateImageModal","selectedItem","setSelectedItem","editItem","setEditItem","imageItem","setImageItem","detailModalToggle","updateImageToggle","editModalToggle","toggle","showDeleteAlert","item","images","width","height","_id","posttitle"],"mappings":"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","sourcesContent":["import {CDataTable, CDropdown, CDropdownItem, CDropdownMenu, CDropdownToggle, CImg} from \"@coreui/react\";\nimport React, {useState} from \"react\";\nimport DeleteModal from \"./modals/DeleteModal\";\nimport DetailModal from \"./modals/DetailModal\";\nimport EditModal from \"./modals/EditModal\";\nimport {FacebookIcon, FacebookShareButton} from \"react-share\"\nimport Cookies from \"universal-cookie\";\nimport * as axios from \"axios\";\nimport UpdateImageModal from \"./modals/UpdateImageModal\";\n\nconst deleteImage = (id, props) => {\n\n    const cookies = new Cookies();\n\n    console.log(cookies.get('token'))\n\n    axios.put(`https://frozen-refuge-74833.herokuapp.com/posts/deleteImage/${id}`, null,\n        {\n            headers: {\n\n                Authorization: cookies.get('token')\n            }\n        }\n    )\n        .then(response => {\n\n            axios.get('https://frozen-refuge-74833.herokuapp.com/posts/',\n                {\n                    headers: {\n\n                        Authorization: cookies.get('token')\n                    }\n                }\n            )\n                .then(response => {\n\n                    const data = response.data\n                    props.updateNews(data)\n\n                })\n        })\n\n}\n\nconst fields = [\n\n    'posttitle',\n    'postcategory',\n    'postdetails',\n    'postconclusion',\n    'images',\n    'share',\n    'actions']\n\nconst NewsTable = (props) => {\n\n    let newsList = props.newsList\n    const [modal, setModal] = useState(false);\n    const [detailModal, setDetailModal] = useState(false);\n    const [editModal, setEditModal] = useState(false);\n    const [updateImageModal, setUpdateImageModal] = useState(false);\n\n    const [selectedItem, setSelectedItem] = useState(false);\n    const [editItem, setEditItem] = useState(false);\n    const [imageItem, setImageItem] = useState(false);\n\n    const detailModalToggle = (id) => {\n        setSelectedItem(id)\n        setDetailModal(!detailModal);\n\n    }\n    const updateImageToggle = (id) => {\n        setImageItem(id)\n        setUpdateImageModal(!updateImageModal);\n\n    }\n\n    const editModalToggle = (id) => {\n        setEditItem(id)\n        setEditModal(!editModal);\n\n    }\n\n    const toggle = (id) => {\n\n        setSelectedItem(id)\n        setModal(!modal);\n\n    }\n\n\n    return (\n        <React.Fragment>\n            {selectedItem ? <DetailModal\n                selectedItem={selectedItem}\n                detailModal={detailModal}\n                detailModalToggle={detailModalToggle}/> : null}\n\n            {imageItem ? <UpdateImageModal\n                updateNews={props.updateNews}\n                imageItem={imageItem}\n                updateImageModal={updateImageModal}\n                updateImageToggle={updateImageToggle}/> : null}\n\n            {editItem ? <EditModal\n                updateNews={props.updateNews}\n                editItem={editItem}\n                editModal={editModal}\n                editModalToggle={editModalToggle}/> : null}\n            <DeleteModal\n                showDeleteAlert={props.showDeleteAlert}\n                updateNews={props.updateNews}\n                selectedItem={selectedItem}\n                modal={modal}\n                toggle={toggle}/>\n\n            <CDataTable\n                items={newsList}\n                fields={fields}\n                bordered\n                itemsPerPage={10}\n                pagination\n                scopedSlots={{\n                    'images':\n                        (item) => (\n\n                            <td>\n                                {item.images !== null ?\n                                    <CImg src={\"https://frozen-refuge-74833.herokuapp.com/PostImage/\" + item.images}\n                                          alt=\"image\" style={{width: 500, height: 400}}/> :\n                                    <CImg src={\"\"}\n                                          alt=\"image\" style={{width: 500, height: 400}}/>}\n\n                                {item.images !== null ?\n                                    <button onClick={() => deleteImage(item._id, props)}>Delete Image</button> : null}\n                            </td>\n                        ),\n                    'share':\n                        (item) => (\n\n                            <td>\n                                <FacebookShareButton\n                                    quote={item.posttitle}\n                                    url={`https://festive-jepsen-4d10b9.netlify.app/#/feeds/details/${item._id}`}\n\n                                >\n                                    <FacebookIcon logoFillColor=\"white\"/>\n                                </FacebookShareButton>\n                            </td>\n                        ),\n                    'actions':\n                        (item) => (\n                            <td>\n\n                                <CDropdown className=\"m-1 btn-group\">\n                                    <CDropdownToggle color=\"primary\">\n                                        Actions\n                                    </CDropdownToggle>\n                                    <CDropdownMenu>\n\n                                        <CDropdownItem\n                                            onClick={() => detailModalToggle(item._id)}>View</CDropdownItem>\n\n                                        <CDropdownItem\n                                            onClick={() => updateImageToggle(item._id)}>Update Image</CDropdownItem>\n\n                                        <CDropdownItem\n                                            onClick={() => editModalToggle(item._id)}>Edit</CDropdownItem>\n\n                                        <CDropdownItem\n                                            key={item._id}\n                                            onClick={() => toggle(item._id)}>Delete</CDropdownItem>\n                                    </CDropdownMenu>\n                                </CDropdown>\n\n\n                            </td>\n                        )\n\n                }}\n            />\n        </React.Fragment>\n    )\n}\n\nexport default NewsTable\n"]},"metadata":{},"sourceType":"module"}